{"version":3,"sources":["webpack:///webpack/bootstrap fac86a19f0d4c8ad5448","webpack:///./components/event/_event.js","webpack:////Users/aljabear/Projects/visualist/~/riot/riot.js","webpack:///./components/event/main.tag","webpack:///./components/event/controls.tag","webpack:///./components/event/secondary_visuals.tag","webpack:///./components/event/mini_tile.tag","webpack:///./components/event/related_items.tag","webpack:///./components/event/source.tag","webpack:///./components/event/cross_refs.tag"],"names":["require","riot","mount","global","factory","exports","module","__TAGS_CACHE","__TAG_IMPL","GLOBAL_MIXIN","RIOT_PREFIX","RIOT_TAG_IS","T_STRING","T_OBJECT","T_UNDEF","T_FUNCTION","XLINK_NS","XLINK_REGEX","WIN","window","undefined","RE_SPECIAL_TAGS","RE_SPECIAL_TAGS_NO_OPTION","RE_RESERVED_NAMES","RE_SVG_TAGS","RE_HTML_ATTRS","CASE_SENSITIVE_ATTRIBUTES","RE_BOOL_ATTRS","IE_VERSION","document","documentMode","isSVGTag","name","test","isBoolAttr","value","isFunction","isObject","isUndefined","isString","isBlank","isArray","Array","isWritable","obj","key","descriptor","Object","getOwnPropertyDescriptor","writable","isReservedName","check","freeze","$$","selector","ctx","querySelectorAll","$","querySelector","createFrag","createDocumentFragment","createDOMPlaceholder","createTextNode","mkEl","isSvg","createElementNS","createElement","getOuterHTML","el","outerHTML","container","appendChild","cloneNode","innerHTML","setInnerHTML","html","doc","DOMParser","parseFromString","node","ownerDocument","importNode","documentElement","remAttr","dom","removeAttribute","getAttr","getAttribute","setAttr","val","xlink","exec","setAttributeNS","setAttribute","safeInsert","root","curr","next","insertBefore","parentNode","walkAttrs","fn","m","toLowerCase","walkNodes","context","res","firstChild","nextSibling","styleNode","cssTextProp","byName","remainder","needsInject","newNode","userNode","id","replaceChild","getElementsByTagName","styleSheet","styleManager","add","css","push","inject","style","keys","map","k","concat","join","cssText","brackets","UNDEF","REGLOB","R_MLCOMMS","R_STRINGS","S_QBLOCKS","source","UNSUPPORTED","RegExp","NEED_ESCAPE","FINDBRACES","DEFAULT","_pairs","cachedBrackets","_regex","_cache","_settings","_loopback","re","_rewrite","bp","replace","_create","pair","arr","split","length","Error","_brackets","reOrIdx","str","tmpl","_bp","parts","match","isexpr","start","pos","lastIndex","index","skipBraces","unescapeStr","slice","s","ch","ix","recch","hasExpr","loopKeys","expr","trim","array","_reset","_setSettings","o","b","defineProperty","set","get","enumerable","settings","_tmpl","data","call","_logErr","clearCache","errorHandler","err","riotData","tagName","_riot_id","console","error","_getTmpl","Function","CH_IDEXPR","String","fromCharCode","RE_CSNAME","RE_QBLOCK","RE_DQUOTE","RE_QBMARK","qstr","i","j","list","_parseExpr","_","RE_BREND","asText","div","cnt","jsb","rightContext","_wrapExpr","mm","lv","ir","JS_CONTEXT","JS_VARNAME","JS_NOPROPS","tb","p","mvar","version","each","len","contains","item","indexOf","toCamel","c","toUpperCase","startsWith","options","extend","configurable","src","args","arguments","misc","observable","callbacks","prototype","defineProperties","on","event","off","cb","splice","one","apply","trigger","arguments$1","arglen","fns","EVENTS_PREFIX_REGEX","handleEvent","handler","e","ptag","_parent","_item","currentTarget","target","srcElement","which","charCode","keyCode","preventUpdate","getImmediateCustomParentTag","isMounted","update","setEventHandler","tag","eventName","bind","addEventListener","_riotEvents","removeEventListener","updateDataIs","parent","conf","delName","tags","arrayishRemove","impl","hasImpl","initChildTag","opts","dataIs","_tags","unmount","updateExpression","attrName","attr","isToggle","isValueAttr","isVirtual","old","bool","frag","makeVirtual","parentElement","isRtag","nodeValue","isAttrRemoved","display","updateAllExpressions","expressions","IfExpr","init","parentTag","stub","pristine","removeChild","newValue","current","parseExpressions","unmountAll","_tag","RefExpr","attrValue","rawValue","hasExp","firstRun","customParent","tagOrDom","refs","arrayishAdd","mkitem","base","create","unmountRedundant","items","t","moveNestedTags","this$1","moveChildTag","move","nextTag","moveVirtual","insert","append","_each","mustReorder","getTagName","useRoot","ref","child","getTag","ifExpr","oldItems","hasKeys","isLoop","isAnonymous","updateEach","filter","_mustReorder","oldPos","mustAppend","Tag$$1","mustIncludeRoot","tree","children","type","nodeType","tagImpl","parseAttributes","attributes","attrs","reHasYield","reYieldAll","reYieldSrc","reYieldDest","rootEls","tr","th","td","col","tblTags","GENERIC","specialTags","select","selectedIndex","tname","childElementCount","replaceYield","text","def","mkdom","checkSvg","Tag$1","onCreate","tag$$1","class","constructor","mountTo","tag2$$1","exists","util","hotReloader","mount$$1","pushTagsTo","riotTag","elem","allTags","selectTags","nodeList","_el","mixins","globals","_id","mixin$$1","mix","g","store","update$1","unregister$$1","__uid","updateOpts","instAttrs","cleanUpData","implAttrs","propsInSyncWithParent","virts","tail","head","tagUpdate","shouldUpdate","inheritFrom","tagMixin","instance","props","proto","getPrototypeOf","getOwnPropertyNames","hasGetterSetter","hasOwnProperty","tagMount","isPrototypeOf","v","globalMixin","mixin","tagUnmount","mustKeepRoot","tagIndex","forEach","_internal","a","mustSync","newPos","skipDataIs","namedTag","ensureArray","dest","isArr","isInStub","inStub","implClass","_innerHTML","sib","reduce","vdom","Tag","tag2","unregister"],"mappings":"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","file":"./static/visualist/event.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fac86a19f0d4c8ad5448","require('./main.tag')\n\nriot.mount('*')\n\n\n// WEBPACK FOOTER //\n// ./components/event/_event.js","/* Riot v3.0.5, @license MIT */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.riot = global.riot || {})));\n}(this, (function (exports) { 'use strict';\n\nvar __TAGS_CACHE = [];\nvar __TAG_IMPL = {};\nvar GLOBAL_MIXIN = '__global_mixin';\nvar RIOT_PREFIX = 'riot-';\nvar RIOT_TAG_IS = 'data-is';\nvar T_STRING = 'string';\nvar T_OBJECT = 'object';\nvar T_UNDEF  = 'undefined';\nvar T_FUNCTION = 'function';\nvar XLINK_NS = 'http://www.w3.org/1999/xlink';\nvar XLINK_REGEX = /^xlink:(\\w+)/;\nvar WIN = typeof window === T_UNDEF ? undefined : window;\nvar RE_SPECIAL_TAGS = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/;\nvar RE_SPECIAL_TAGS_NO_OPTION = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;\nvar RE_RESERVED_NAMES = /^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|trigger|o(?:n|ff|ne))$/;\nvar RE_SVG_TAGS = /^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/;\nvar RE_HTML_ATTRS = /([-\\w]+) ?= ?(?:\"([^\"]*)|'([^']*)|({[^}]*}))/g;\nvar CASE_SENSITIVE_ATTRIBUTES = { 'viewbox': 'viewBox' };\nvar RE_BOOL_ATTRS = /^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/;\nvar IE_VERSION = (WIN && WIN.document || {}).documentMode | 0;\n\n/**\n * Check whether a DOM node must be considered a part of an svg document\n * @param   { String } name -\n * @returns { Boolean } -\n */\nfunction isSVGTag(name) {\n  return RE_SVG_TAGS.test(name)\n}\n\n/**\n * Check Check if the passed argument is undefined\n * @param   { String } value -\n * @returns { Boolean } -\n */\nfunction isBoolAttr(value) {\n  return RE_BOOL_ATTRS.test(value)\n}\n\n/**\n * Check if passed argument is a function\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isFunction(value) {\n  return typeof value === T_FUNCTION || false // avoid IE problems\n}\n\n/**\n * Check if passed argument is an object, exclude null\n * NOTE: use isObject(x) && !isArray(x) to excludes arrays.\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isObject(value) {\n  return value && typeof value === T_OBJECT // typeof null is 'object'\n}\n\n/**\n * Check if passed argument is undefined\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isUndefined(value) {\n  return typeof value === T_UNDEF\n}\n\n/**\n * Check if passed argument is a string\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isString(value) {\n  return typeof value === T_STRING\n}\n\n/**\n * Check if passed argument is empty. Different from falsy, because we dont consider 0 or false to be blank\n * @param { * } value -\n * @returns { Boolean } -\n */\nfunction isBlank(value) {\n  return isUndefined(value) || value === null || value === ''\n}\n\n/**\n * Check if passed argument is a kind of array\n * @param   { * } value -\n * @returns { Boolean } -\n */\nfunction isArray(value) {\n  return Array.isArray(value) || value instanceof Array\n}\n\n/**\n * Check whether object's property could be overridden\n * @param   { Object }  obj - source object\n * @param   { String }  key - object property\n * @returns { Boolean } -\n */\nfunction isWritable(obj, key) {\n  var descriptor = Object.getOwnPropertyDescriptor(obj, key);\n  return isUndefined(obj[key]) || descriptor && descriptor.writable\n}\n\n/**\n * Check if passed argument is a reserved name\n * @param   { String } value -\n * @returns { Boolean } -\n */\nfunction isReservedName(value) {\n  return RE_RESERVED_NAMES.test(value)\n}\n\nvar check = Object.freeze({\n\tisSVGTag: isSVGTag,\n\tisBoolAttr: isBoolAttr,\n\tisFunction: isFunction,\n\tisObject: isObject,\n\tisUndefined: isUndefined,\n\tisString: isString,\n\tisBlank: isBlank,\n\tisArray: isArray,\n\tisWritable: isWritable,\n\tisReservedName: isReservedName\n});\n\n/**\n * Shorter and fast way to select multiple nodes in the DOM\n * @param   { String } selector - DOM selector\n * @param   { Object } ctx - DOM node where the targets of our search will is located\n * @returns { Object } dom nodes found\n */\nfunction $$(selector, ctx) {\n  return (ctx || document).querySelectorAll(selector)\n}\n\n/**\n * Shorter and fast way to select a single node in the DOM\n * @param   { String } selector - unique dom selector\n * @param   { Object } ctx - DOM node where the target of our search will is located\n * @returns { Object } dom node found\n */\nfunction $(selector, ctx) {\n  return (ctx || document).querySelector(selector)\n}\n\n/**\n * Create a document fragment\n * @returns { Object } document fragment\n */\nfunction createFrag() {\n  return document.createDocumentFragment()\n}\n\n/**\n * Create a document text node\n * @returns { Object } create a text node to use as placeholder\n */\nfunction createDOMPlaceholder() {\n  return document.createTextNode('')\n}\n\n/**\n * Create a generic DOM node\n * @param   { String } name - name of the DOM node we want to create\n * @param   { Boolean } isSvg - should we use a SVG as parent node?\n * @returns { Object } DOM node just created\n */\nfunction mkEl(name, isSvg) {\n  return isSvg ?\n    document.createElementNS('http://www.w3.org/2000/svg', 'svg') :\n    document.createElement(name)\n}\n\n/**\n * Get the outer html of any DOM node SVGs included\n * @param   { Object } el - DOM node to parse\n * @returns { String } el.outerHTML\n */\nfunction getOuterHTML(el) {\n  if (el.outerHTML)\n    { return el.outerHTML }\n  // some browsers do not support outerHTML on the SVGs tags\n  else {\n    var container = mkEl('div');\n    container.appendChild(el.cloneNode(true));\n    return container.innerHTML\n  }\n}\n\n/**\n * Set the inner html of any DOM node SVGs included\n * @param { Object } container - DOM node where we'll inject new html\n * @param { String } html - html to inject\n */\nfunction setInnerHTML(container, html) {\n  if (!isUndefined(container.innerHTML))\n    { container.innerHTML = html; }\n    // some browsers do not support innerHTML on the SVGs tags\n  else {\n    var doc = new DOMParser().parseFromString(html, 'application/xml');\n    var node = container.ownerDocument.importNode(doc.documentElement, true);\n    container.appendChild(node);\n  }\n}\n\n/**\n * Remove any DOM attribute from a node\n * @param   { Object } dom - DOM node we want to update\n * @param   { String } name - name of the property we want to remove\n */\nfunction remAttr(dom, name) {\n  dom.removeAttribute(name);\n}\n\n/**\n * Get the value of any DOM attribute on a node\n * @param   { Object } dom - DOM node we want to parse\n * @param   { String } name - name of the attribute we want to get\n * @returns { String | undefined } name of the node attribute whether it exists\n */\nfunction getAttr(dom, name) {\n  return dom.getAttribute(name)\n}\n\n/**\n * Set any DOM attribute\n * @param { Object } dom - DOM node we want to update\n * @param { String } name - name of the property we want to set\n * @param { String } val - value of the property we want to set\n */\nfunction setAttr(dom, name, val) {\n  var xlink = XLINK_REGEX.exec(name);\n  if (xlink && xlink[1])\n    { dom.setAttributeNS(XLINK_NS, xlink[1], val); }\n  else\n    { dom.setAttribute(name, val); }\n}\n\n/**\n * Insert safely a tag to fix #1962 #1649\n * @param   { HTMLElement } root - children container\n * @param   { HTMLElement } curr - node to insert\n * @param   { HTMLElement } next - node that should preceed the current node inserted\n */\nfunction safeInsert(root, curr, next) {\n  root.insertBefore(curr, next.parentNode && next);\n}\n\n/**\n * Minimize risk: only zero or one _space_ between attr & value\n * @param   { String }   html - html string we want to parse\n * @param   { Function } fn - callback function to apply on any attribute found\n */\nfunction walkAttrs(html, fn) {\n  if (!html)\n    { return }\n  var m;\n  while (m = RE_HTML_ATTRS.exec(html))\n    { fn(m[1].toLowerCase(), m[2] || m[3] || m[4]); }\n}\n\n/**\n * Walk down recursively all the children tags starting dom node\n * @param   { Object }   dom - starting node where we will start the recursion\n * @param   { Function } fn - callback to transform the child node just found\n * @param   { Object }   context - fn can optionally return an object, which is passed to children\n */\nfunction walkNodes(dom, fn, context) {\n  if (dom) {\n    var res = fn(dom, context);\n    var next;\n    // stop the recursion\n    if (res === false) { return }\n\n    dom = dom.firstChild;\n\n    while (dom) {\n      next = dom.nextSibling;\n      walkNodes(dom, fn, res);\n      dom = next;\n    }\n  }\n}\n\nvar dom = Object.freeze({\n\t$$: $$,\n\t$: $,\n\tcreateFrag: createFrag,\n\tcreateDOMPlaceholder: createDOMPlaceholder,\n\tmkEl: mkEl,\n\tgetOuterHTML: getOuterHTML,\n\tsetInnerHTML: setInnerHTML,\n\tremAttr: remAttr,\n\tgetAttr: getAttr,\n\tsetAttr: setAttr,\n\tsafeInsert: safeInsert,\n\twalkAttrs: walkAttrs,\n\twalkNodes: walkNodes\n});\n\nvar styleNode;\nvar cssTextProp;\nvar byName = {};\nvar remainder = [];\nvar needsInject = false;\n\n// skip the following code on the server\nif (WIN) {\n  styleNode = (function () {\n    // create a new style element with the correct type\n    var newNode = mkEl('style');\n    setAttr(newNode, 'type', 'text/css');\n\n    // replace any user node or insert the new one into the head\n    var userNode = $('style[type=riot]');\n    if (userNode) {\n      if (userNode.id) { newNode.id = userNode.id; }\n      userNode.parentNode.replaceChild(newNode, userNode);\n    }\n    else { document.getElementsByTagName('head')[0].appendChild(newNode); }\n\n    return newNode\n  })();\n  cssTextProp = styleNode.styleSheet;\n}\n\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\nvar styleManager = {\n  styleNode: styleNode,\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { String } css - css string\n   * @param { String } name - if it's passed we will map the css to a tagname\n   */\n  add: function add(css, name) {\n    if (name) { byName[name] = css; }\n    else { remainder.push(css); }\n    needsInject = true;\n  },\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   */\n  inject: function inject() {\n    if (!WIN || !needsInject) { return }\n    needsInject = false;\n    var style = Object.keys(byName)\n      .map(function(k) { return byName[k] })\n      .concat(remainder).join('\\n');\n    if (cssTextProp) { cssTextProp.cssText = style; }\n    else { styleNode.innerHTML = style; }\n  }\n};\n\n/**\n * The riot template engine\n * @version v3.0.1\n */\n/**\n * riot.util.brackets\n *\n * - `brackets    ` - Returns a string or regex based on its parameter\n * - `brackets.set` - Change the current riot brackets\n *\n * @module\n */\n\n/* global riot */\n\nvar brackets = (function (UNDEF) {\n\n  var\n    REGLOB = 'g',\n\n    R_MLCOMMS = /\\/\\*[^*]*\\*+(?:[^*\\/][^*]*\\*+)*\\//g,\n\n    R_STRINGS = /\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'/g,\n\n    S_QBLOCKS = R_STRINGS.source + '|' +\n      /(?:\\breturn\\s+|(?:[$\\w\\)\\]]|\\+\\+|--)\\s*(\\/)(?![*\\/]))/.source + '|' +\n      /\\/(?=[^*\\/])[^[\\/\\\\]*(?:(?:\\[(?:\\\\.|[^\\]\\\\]*)*\\]|\\\\.)[^[\\/\\\\]*)*?(\\/)[gim]*/.source,\n\n    UNSUPPORTED = RegExp('[\\\\' + 'x00-\\\\x1F<>a-zA-Z0-9\\'\",;\\\\\\\\]'),\n\n    NEED_ESCAPE = /(?=[[\\]()*+?.^$|])/g,\n\n    FINDBRACES = {\n      '(': RegExp('([()])|'   + S_QBLOCKS, REGLOB),\n      '[': RegExp('([[\\\\]])|' + S_QBLOCKS, REGLOB),\n      '{': RegExp('([{}])|'   + S_QBLOCKS, REGLOB)\n    },\n\n    DEFAULT = '{ }';\n\n  var _pairs = [\n    '{', '}',\n    '{', '}',\n    /{[^}]*}/,\n    /\\\\([{}])/g,\n    /\\\\({)|{/g,\n    RegExp('\\\\\\\\(})|([[({])|(})|' + S_QBLOCKS, REGLOB),\n    DEFAULT,\n    /^\\s*{\\^?\\s*([$\\w]+)(?:\\s*,\\s*(\\S+))?\\s+in\\s+(\\S.*)\\s*}/,\n    /(^|[^\\\\]){=[\\S\\s]*?}/\n  ];\n\n  var\n    cachedBrackets = UNDEF,\n    _regex,\n    _cache = [],\n    _settings;\n\n  function _loopback (re) { return re }\n\n  function _rewrite (re, bp) {\n    if (!bp) { bp = _cache; }\n    return new RegExp(\n      re.source.replace(/{/g, bp[2]).replace(/}/g, bp[3]), re.global ? REGLOB : ''\n    )\n  }\n\n  function _create (pair) {\n    if (pair === DEFAULT) { return _pairs }\n\n    var arr = pair.split(' ');\n\n    if (arr.length !== 2 || UNSUPPORTED.test(pair)) {\n      throw new Error('Unsupported brackets \"' + pair + '\"')\n    }\n    arr = arr.concat(pair.replace(NEED_ESCAPE, '\\\\').split(' '));\n\n    arr[4] = _rewrite(arr[1].length > 1 ? /{[\\S\\s]*?}/ : _pairs[4], arr);\n    arr[5] = _rewrite(pair.length > 3 ? /\\\\({|})/g : _pairs[5], arr);\n    arr[6] = _rewrite(_pairs[6], arr);\n    arr[7] = RegExp('\\\\\\\\(' + arr[3] + ')|([[({])|(' + arr[3] + ')|' + S_QBLOCKS, REGLOB);\n    arr[8] = pair;\n    return arr\n  }\n\n  function _brackets (reOrIdx) {\n    return reOrIdx instanceof RegExp ? _regex(reOrIdx) : _cache[reOrIdx]\n  }\n\n  _brackets.split = function split (str, tmpl, _bp) {\n    // istanbul ignore next: _bp is for the compiler\n    if (!_bp) { _bp = _cache; }\n\n    var\n      parts = [],\n      match,\n      isexpr,\n      start,\n      pos,\n      re = _bp[6];\n\n    isexpr = start = re.lastIndex = 0;\n\n    while ((match = re.exec(str))) {\n\n      pos = match.index;\n\n      if (isexpr) {\n\n        if (match[2]) {\n          re.lastIndex = skipBraces(str, match[2], re.lastIndex);\n          continue\n        }\n        if (!match[3]) {\n          continue\n        }\n      }\n\n      if (!match[1]) {\n        unescapeStr(str.slice(start, pos));\n        start = re.lastIndex;\n        re = _bp[6 + (isexpr ^= 1)];\n        re.lastIndex = start;\n      }\n    }\n\n    if (str && start < str.length) {\n      unescapeStr(str.slice(start));\n    }\n\n    return parts\n\n    function unescapeStr (s) {\n      if (tmpl || isexpr) {\n        parts.push(s && s.replace(_bp[5], '$1'));\n      } else {\n        parts.push(s);\n      }\n    }\n\n    function skipBraces (s, ch, ix) {\n      var\n        match,\n        recch = FINDBRACES[ch];\n\n      recch.lastIndex = ix;\n      ix = 1;\n      while ((match = recch.exec(s))) {\n        if (match[1] &&\n          !(match[1] === ch ? ++ix : --ix)) { break }\n      }\n      return ix ? s.length : recch.lastIndex\n    }\n  };\n\n  _brackets.hasExpr = function hasExpr (str) {\n    return _cache[4].test(str)\n  };\n\n  _brackets.loopKeys = function loopKeys (expr) {\n    var m = expr.match(_cache[9]);\n\n    return m\n      ? { key: m[1], pos: m[2], val: _cache[0] + m[3].trim() + _cache[1] }\n      : { val: expr.trim() }\n  };\n\n  _brackets.array = function array (pair) {\n    return pair ? _create(pair) : _cache\n  };\n\n  function _reset (pair) {\n    if ((pair || (pair = DEFAULT)) !== _cache[8]) {\n      _cache = _create(pair);\n      _regex = pair === DEFAULT ? _loopback : _rewrite;\n      _cache[9] = _regex(_pairs[9]);\n    }\n    cachedBrackets = pair;\n  }\n\n  function _setSettings (o) {\n    var b;\n\n    o = o || {};\n    b = o.brackets;\n    Object.defineProperty(o, 'brackets', {\n      set: _reset,\n      get: function () { return cachedBrackets },\n      enumerable: true\n    });\n    _settings = o;\n    _reset(b);\n  }\n\n  Object.defineProperty(_brackets, 'settings', {\n    set: _setSettings,\n    get: function () { return _settings }\n  });\n\n  /* istanbul ignore next: in the browser riot is always in the scope */\n  _brackets.settings = typeof riot !== 'undefined' && riot.settings || {};\n  _brackets.set = _reset;\n\n  _brackets.R_STRINGS = R_STRINGS;\n  _brackets.R_MLCOMMS = R_MLCOMMS;\n  _brackets.S_QBLOCKS = S_QBLOCKS;\n\n  return _brackets\n\n})();\n\n/**\n * @module tmpl\n *\n * tmpl          - Root function, returns the template value, render with data\n * tmpl.hasExpr  - Test the existence of a expression inside a string\n * tmpl.loopKeys - Get the keys for an 'each' loop (used by `_each`)\n */\n\nvar tmpl = (function () {\n\n  var _cache = {};\n\n  function _tmpl (str, data) {\n    if (!str) { return str }\n\n    return (_cache[str] || (_cache[str] = _create(str))).call(data, _logErr)\n  }\n\n  _tmpl.hasExpr = brackets.hasExpr;\n\n  _tmpl.loopKeys = brackets.loopKeys;\n\n  // istanbul ignore next\n  _tmpl.clearCache = function () { _cache = {}; };\n\n  _tmpl.errorHandler = null;\n\n  function _logErr (err, ctx) {\n\n    err.riotData = {\n      tagName: ctx && ctx.root && ctx.root.tagName,\n      _riot_id: ctx && ctx._riot_id  //eslint-disable-line camelcase\n    };\n\n    if (_tmpl.errorHandler) { _tmpl.errorHandler(err); }\n    else if (\n      typeof console !== 'undefined' &&\n      typeof console.error === 'function'\n    ) {\n      if (err.riotData.tagName) {\n        console.error('Riot template error thrown in the <%s> tag', err.riotData.tagName.toLowerCase());\n      }\n      console.error(err);\n    }\n  }\n\n  function _create (str) {\n    var expr = _getTmpl(str);\n\n    if (expr.slice(0, 11) !== 'try{return ') { expr = 'return ' + expr; }\n\n    return new Function('E', expr + ';')    // eslint-disable-line no-new-func\n  }\n\n  var\n    CH_IDEXPR = String.fromCharCode(0x2057),\n    RE_CSNAME = /^(?:(-?[_A-Za-z\\xA0-\\xFF][-\\w\\xA0-\\xFF]*)|\\u2057(\\d+)~):/,\n    RE_QBLOCK = RegExp(brackets.S_QBLOCKS, 'g'),\n    RE_DQUOTE = /\\u2057/g,\n    RE_QBMARK = /\\u2057(\\d+)~/g;\n\n  function _getTmpl (str) {\n    var\n      qstr = [],\n      expr,\n      parts = brackets.split(str.replace(RE_DQUOTE, '\"'), 1);\n\n    if (parts.length > 2 || parts[0]) {\n      var i, j, list = [];\n\n      for (i = j = 0; i < parts.length; ++i) {\n\n        expr = parts[i];\n\n        if (expr && (expr = i & 1\n\n            ? _parseExpr(expr, 1, qstr)\n\n            : '\"' + expr\n                .replace(/\\\\/g, '\\\\\\\\')\n                .replace(/\\r\\n?|\\n/g, '\\\\n')\n                .replace(/\"/g, '\\\\\"') +\n              '\"'\n\n          )) { list[j++] = expr; }\n\n      }\n\n      expr = j < 2 ? list[0]\n           : '[' + list.join(',') + '].join(\"\")';\n\n    } else {\n\n      expr = _parseExpr(parts[1], 0, qstr);\n    }\n\n    if (qstr[0]) {\n      expr = expr.replace(RE_QBMARK, function (_, pos) {\n        return qstr[pos]\n          .replace(/\\r/g, '\\\\r')\n          .replace(/\\n/g, '\\\\n')\n      });\n    }\n    return expr\n  }\n\n  var\n    RE_BREND = {\n      '(': /[()]/g,\n      '[': /[[\\]]/g,\n      '{': /[{}]/g\n    };\n\n  function _parseExpr (expr, asText, qstr) {\n\n    expr = expr\n          .replace(RE_QBLOCK, function (s, div) {\n            return s.length > 2 && !div ? CH_IDEXPR + (qstr.push(s) - 1) + '~' : s\n          })\n          .replace(/\\s+/g, ' ').trim()\n          .replace(/\\ ?([[\\({},?\\.:])\\ ?/g, '$1');\n\n    if (expr) {\n      var\n        list = [],\n        cnt = 0,\n        match;\n\n      while (expr &&\n            (match = expr.match(RE_CSNAME)) &&\n            !match.index\n        ) {\n        var\n          key,\n          jsb,\n          re = /,|([[{(])|$/g;\n\n        expr = RegExp.rightContext;\n        key  = match[2] ? qstr[match[2]].slice(1, -1).trim().replace(/\\s+/g, ' ') : match[1];\n\n        while (jsb = (match = re.exec(expr))[1]) { skipBraces(jsb, re); }\n\n        jsb  = expr.slice(0, match.index);\n        expr = RegExp.rightContext;\n\n        list[cnt++] = _wrapExpr(jsb, 1, key);\n      }\n\n      expr = !cnt ? _wrapExpr(expr, asText)\n           : cnt > 1 ? '[' + list.join(',') + '].join(\" \").trim()' : list[0];\n    }\n    return expr\n\n    function skipBraces (ch, re) {\n      var\n        mm,\n        lv = 1,\n        ir = RE_BREND[ch];\n\n      ir.lastIndex = re.lastIndex;\n      while (mm = ir.exec(expr)) {\n        if (mm[0] === ch) { ++lv; }\n        else if (!--lv) { break }\n      }\n      re.lastIndex = lv ? expr.length : ir.lastIndex;\n    }\n  }\n\n  // istanbul ignore next: not both\n  var // eslint-disable-next-line max-len\n    JS_CONTEXT = '\"in this?this:' + (typeof window !== 'object' ? 'global' : 'window') + ').',\n    JS_VARNAME = /[,{][\\$\\w]+(?=:)|(^ *|[^$\\w\\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\\w]))([$_A-Za-z][$\\w]*)/g,\n    JS_NOPROPS = /^(?=(\\.[$\\w]+))\\1(?:[^.[(]|$)/;\n\n  function _wrapExpr (expr, asText, key) {\n    var tb;\n\n    expr = expr.replace(JS_VARNAME, function (match, p, mvar, pos, s) {\n      if (mvar) {\n        pos = tb ? 0 : pos + match.length;\n\n        if (mvar !== 'this' && mvar !== 'global' && mvar !== 'window') {\n          match = p + '(\"' + mvar + JS_CONTEXT + mvar;\n          if (pos) { tb = (s = s[pos]) === '.' || s === '(' || s === '['; }\n        } else if (pos) {\n          tb = !JS_NOPROPS.test(s.slice(pos));\n        }\n      }\n      return match\n    });\n\n    if (tb) {\n      expr = 'try{return ' + expr + '}catch(e){E(e,this)}';\n    }\n\n    if (key) {\n\n      expr = (tb\n          ? 'function(){' + expr + '}.call(this)' : '(' + expr + ')'\n        ) + '?\"' + key + '\":\"\"';\n\n    } else if (asText) {\n\n      expr = 'function(v){' + (tb\n          ? expr.replace('return ', 'v=') : 'v=(' + expr + ')'\n        ) + ';return v||v===0?v:\"\"}.call(this)';\n    }\n\n    return expr\n  }\n\n  _tmpl.version = brackets.version = 'v3.0.1';\n\n  return _tmpl\n\n})();\n\n/**\n * Specialized function for looping an array-like collection with `each={}`\n * @param   { Array } list - collection of items\n * @param   {Function} fn - callback function\n * @returns { Array } the array looped\n */\nfunction each(list, fn) {\n  var len = list ? list.length : 0;\n\n  for (var i = 0, el; i < len; ++i) {\n    el = list[i];\n    // return false -> current item was removed by fn during the loop\n    if (fn(el, i) === false)\n      { i--; }\n  }\n  return list\n}\n\n/**\n * Check whether an array contains an item\n * @param   { Array } array - target array\n * @param   { * } item - item to test\n * @returns { Boolean } -\n */\nfunction contains(array, item) {\n  return ~array.indexOf(item)\n}\n\n/**\n * Convert a string containing dashes to camel case\n * @param   { String } str - input string\n * @returns { String } my-string -> myString\n */\nfunction toCamel(str) {\n  return str.replace(/-(\\w)/g, function (_, c) { return c.toUpperCase(); })\n}\n\n/**\n * Faster String startsWith alternative\n * @param   { String } str - source string\n * @param   { String } value - test string\n * @returns { Boolean } -\n */\nfunction startsWith(str, value) {\n  return str.slice(0, value.length) === value\n}\n\n/**\n * Helper function to set an immutable property\n * @param   { Object } el - object where the new property will be set\n * @param   { String } key - object key where the new property will be stored\n * @param   { * } value - value of the new property\n * @param   { Object } options - set the propery overriding the default options\n * @returns { Object } - the initial object\n */\nfunction defineProperty(el, key, value, options) {\n  Object.defineProperty(el, key, extend({\n    value: value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  return el\n}\n\n/**\n * Extend any object with other properties\n * @param   { Object } src - source object\n * @returns { Object } the resulting extended object\n *\n * var obj = { foo: 'baz' }\n * extend(obj, {bar: 'bar', foo: 'bar'})\n * console.log(obj) => {bar: 'bar', foo: 'bar'}\n *\n */\nfunction extend(src) {\n  var obj, args = arguments;\n  for (var i = 1; i < args.length; ++i) {\n    if (obj = args[i]) {\n      for (var key in obj) {\n        // check if this property of the source object could be overridden\n        if (isWritable(src, key))\n          { src[key] = obj[key]; }\n      }\n    }\n  }\n  return src\n}\n\nvar misc = Object.freeze({\n\teach: each,\n\tcontains: contains,\n\ttoCamel: toCamel,\n\tstartsWith: startsWith,\n\tdefineProperty: defineProperty,\n\textend: extend\n});\n\nvar observable = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {};\n\n  /**\n   * Private variables\n   */\n  var callbacks = {},\n    slice = Array.prototype.slice;\n\n  /**\n   * Public Api\n   */\n\n  // extend the el object adding the observable methods\n  Object.defineProperties(el, {\n    /**\n     * Listen to the given `event` ands\n     * execute the `callback` each time an event is triggered.\n     * @param  { String } event - event id\n     * @param  { Function } fn - callback function\n     * @returns { Object } el\n     */\n    on: {\n      value: function(event, fn) {\n        if (typeof fn == 'function')\n          { (callbacks[event] = callbacks[event] || []).push(fn); }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Removes the given `event` listeners\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    off: {\n      value: function(event, fn) {\n        if (event == '*' && !fn) { callbacks = {}; }\n        else {\n          if (fn) {\n            var arr = callbacks[event];\n            for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n              if (cb == fn) { arr.splice(i--, 1); }\n            }\n          } else { delete callbacks[event]; }\n        }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Listen to the given `event` and\n     * execute the `callback` at most once\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    one: {\n      value: function(event, fn) {\n        function on() {\n          el.off(event, on);\n          fn.apply(el, arguments);\n        }\n        return el.on(event, on)\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Execute all callback functions that listen to\n     * the given `event`\n     * @param   { String } event - event id\n     * @returns { Object } el\n     */\n    trigger: {\n      value: function(event) {\n        var arguments$1 = arguments;\n\n\n        // getting the arguments\n        var arglen = arguments.length - 1,\n          args = new Array(arglen),\n          fns,\n          fn,\n          i;\n\n        for (i = 0; i < arglen; i++) {\n          args[i] = arguments$1[i + 1]; // skip first argument\n        }\n\n        fns = slice.call(callbacks[event] || [], 0);\n\n        for (i = 0; fn = fns[i]; ++i) {\n          fn.apply(el, args);\n        }\n\n        if (callbacks['*'] && event != '*')\n          { el.trigger.apply(el, ['*', event].concat(args)); }\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    }\n  });\n\n  return el\n\n};\n\nvar EVENTS_PREFIX_REGEX = /^on/;\n\n/**\n * Trigger DOM events\n * @param   { HTMLElement } dom - dom element target of the event\n * @param   { Function } handler - user function\n * @param   { Object } e - event object\n */\nfunction handleEvent(dom, handler, e) {\n  var ptag = this._parent,\n    item = this._item;\n\n  if (!item)\n    { while (ptag && !item) {\n      item = ptag._item;\n      ptag = ptag._parent;\n    } }\n\n  // override the event properties\n  if (isWritable(e, 'currentTarget')) { e.currentTarget = dom; }\n  if (isWritable(e, 'target')) { e.target = e.srcElement; }\n  if (isWritable(e, 'which')) { e.which = e.charCode || e.keyCode; }\n\n  e.item = item;\n\n  handler.call(this, e);\n\n  if (!e.preventUpdate) {\n    var p = getImmediateCustomParentTag(this);\n    // fixes #2083\n    if (p.isMounted) { p.update(); }\n  }\n}\n\n/**\n * Attach an event to a DOM node\n * @param { String } name - event name\n * @param { Function } handler - event callback\n * @param { Object } dom - dom node\n * @param { Tag } tag - tag instance\n */\nfunction setEventHandler(name, handler, dom, tag) {\n  var eventName,\n    cb = handleEvent.bind(tag, dom, handler);\n\n  if (!dom.addEventListener) {\n    dom[name] = cb;\n    return\n  }\n\n  // avoid to bind twice the same event\n  dom[name] = null;\n\n  // normalize event name\n  eventName = name.replace(EVENTS_PREFIX_REGEX, '');\n\n  // cache the callback directly on the DOM node\n  if (!dom._riotEvents) { dom._riotEvents = {}; }\n\n  if (dom._riotEvents[name])\n    { dom.removeEventListener(eventName, dom._riotEvents[name]); }\n\n  dom._riotEvents[name] = cb;\n  dom.addEventListener(eventName, cb, false);\n}\n\n/**\n * Update dynamically created data-is tags with changing expressions\n * @param { Object } expr - expression tag and expression info\n * @param { Tag } parent - parent for tag creation\n */\nfunction updateDataIs(expr, parent) {\n  var tagName = tmpl(expr.value, parent),\n    conf;\n\n  if (expr.tag && expr.tagName === tagName) {\n    expr.tag.update();\n    return\n  }\n\n  // sync _parent to accommodate changing tagnames\n  if (expr.tag) {\n    var delName = expr.value,\n      tags = expr.tag._parent.tags;\n\n    setAttr(expr.tag.root, RIOT_TAG_IS, tagName); // update for css\n    arrayishRemove(tags, delName, expr.tag);\n  }\n\n  expr.impl = __TAG_IMPL[tagName];\n  conf = {root: expr.dom, parent: parent, hasImpl: true, tagName: tagName};\n  expr.tag = initChildTag(expr.impl, conf, expr.dom.innerHTML, parent);\n  expr.tagName = tagName;\n  expr.tag.mount();\n  expr.tag.update();\n\n  // parent is the placeholder tag, not the dynamic tag so clean up\n  parent.on('unmount', function () {\n    var delName = expr.tag.opts.dataIs,\n      tags = expr.tag.parent.tags,\n      _tags = expr.tag._parent.tags;\n    arrayishRemove(tags, delName, expr.tag);\n    arrayishRemove(_tags, delName, expr.tag);\n    expr.tag.unmount();\n  });\n}\n\n/**\n * Update on single tag expression\n * @this Tag\n * @param { Object } expr - expression logic\n * @returns { undefined }\n */\nfunction updateExpression(expr) {\n  var dom = expr.dom,\n    attrName = expr.attr,\n    isToggle = /^(show|hide)$/.test(attrName),\n    // the value for the toggle must consider also the parent tag\n    value = isToggle ? tmpl(expr.expr, extend({}, this, this.parent)) : tmpl(expr.expr, this),\n    isValueAttr = attrName === 'riot-value',\n    isVirtual = expr.root && expr.root.tagName === 'VIRTUAL',\n    parent = dom && (expr.parent || dom.parentNode),\n    old;\n\n  if (expr.bool)\n    { value = value ? attrName : false; }\n  else if (isUndefined(value) || value === null)\n    { value = ''; }\n\n  if (expr._riot_id) { // if it's a tag\n    if (expr.isMounted) {\n      expr.update();\n\n    // if it hasn't been mounted yet, do that now.\n    } else {\n      expr.mount();\n\n      if (isVirtual) {\n        var frag = document.createDocumentFragment();\n        makeVirtual.call(expr, frag);\n        expr.root.parentElement.replaceChild(frag, expr.root);\n      }\n    }\n    return\n  }\n\n  old = expr.value;\n  expr.value = value;\n\n  if (expr.update) {\n    expr.update();\n    return\n  }\n\n  if (expr.isRtag && value) { return updateDataIs(expr, this) }\n  if (old === value) { return }\n  // no change, so nothing more to do\n  if (isValueAttr && dom.value === value) { return }\n\n  // textarea and text nodes have no attribute name\n  if (!attrName) {\n    // about #815 w/o replace: the browser converts the value to a string,\n    // the comparison by \"==\" does too, but not in the server\n    value += '';\n    // test for parent avoids error with invalid assignment to nodeValue\n    if (parent) {\n      // cache the parent node because somehow it will become null on IE\n      // on the next iteration\n      expr.parent = parent;\n      if (parent.tagName === 'TEXTAREA') {\n        parent.value = value;                    // #1113\n        if (!IE_VERSION) { dom.nodeValue = value; }  // #1625 IE throws here, nodeValue\n      }                                         // will be available on 'updated'\n      else { dom.nodeValue = value; }\n    }\n    return\n  }\n\n  // remove original attribute\n  if (!expr.isAttrRemoved || !value) {\n    remAttr(dom, attrName);\n    expr.isAttrRemoved = true;\n  }\n\n  // event handler\n  if (isFunction(value)) {\n    setEventHandler(attrName, value, dom, this);\n  // show / hide\n  } else if (isToggle) {\n    if (attrName === 'hide') { value = !value; }\n    dom.style.display = value ? '' : 'none';\n  // field value\n  } else if (isValueAttr) {\n    dom.value = value;\n  // <img src=\"{ expr }\">\n  } else if (startsWith(attrName, RIOT_PREFIX) && attrName !== RIOT_TAG_IS) {\n    attrName = attrName.slice(RIOT_PREFIX.length);\n    if (CASE_SENSITIVE_ATTRIBUTES[attrName])\n      { attrName = CASE_SENSITIVE_ATTRIBUTES[attrName]; }\n    if (value != null)\n      { setAttr(dom, attrName, value); }\n  } else {\n    // <select> <option selected={true}> </select>\n    if (attrName === 'selected' && parent && /^(SELECT|OPTGROUP)$/.test(parent.tagName) && value) {\n      parent.value = dom.value;\n    } if (expr.bool) {\n      dom[attrName] = value;\n      if (!value) { return }\n    } if (value === 0 || value && typeof value !== T_OBJECT) {\n      setAttr(dom, attrName, value);\n    }\n  }\n}\n\n/**\n * Update all the expressions in a Tag instance\n * @this Tag\n * @param { Array } expressions - expression that must be re evaluated\n */\nfunction updateAllExpressions(expressions) {\n  each(expressions, updateExpression.bind(this));\n}\n\nvar IfExpr = {\n  init: function init(dom, parentTag, expr) {\n    remAttr(dom, 'if');\n    this.parentTag = parentTag;\n    this.expr = expr;\n    this.stub = document.createTextNode('');\n    this.pristine = dom;\n\n    var p = dom.parentNode;\n    p.insertBefore(this.stub, dom);\n    p.removeChild(dom);\n\n    return this\n  },\n  update: function update() {\n    var newValue = tmpl(this.expr, this.parentTag);\n\n    if (newValue && !this.current) { // insert\n      this.current = this.pristine.cloneNode(true);\n      this.stub.parentNode.insertBefore(this.current, this.stub);\n\n      this.expressions = [];\n      parseExpressions.apply(this.parentTag, [this.current, this.expressions, true]);\n    } else if (!newValue && this.current) { // remove\n      unmountAll(this.expressions);\n      if (this.current._tag) {\n        this.current._tag.unmount();\n      } else if (this.current.parentNode)\n        { this.current.parentNode.removeChild(this.current); }\n      this.current = null;\n      this.expressions = [];\n    }\n\n    if (newValue) { updateAllExpressions.call(this.parentTag, this.expressions); }\n  },\n  unmount: function unmount() {\n    unmountAll(this.expressions || []);\n    delete this.pristine;\n    delete this.parentNode;\n    delete this.stub;\n  }\n};\n\nvar RefExpr = {\n  init: function init(dom, attrName, attrValue, parent) {\n    this.dom = dom;\n    this.attr = attrName;\n    this.rawValue = attrValue;\n    this.parent = parent;\n    this.hasExp = tmpl.hasExpr(attrValue);\n    this.firstRun = true;\n\n    return this\n  },\n  update: function update() {\n    var value = this.rawValue;\n    if (this.hasExp)\n      { value = tmpl(this.rawValue, this.parent); }\n\n    // if nothing changed, we're done\n    if (!this.firstRun && value === this.value) { return }\n\n    var customParent = this.parent && getImmediateCustomParentTag(this.parent);\n\n    // if the referenced element is a custom tag, then we set the tag itself, rather than DOM\n    var tagOrDom = this.tag || this.dom;\n\n    // the name changed, so we need to remove it from the old key (if present)\n    if (!isBlank(this.value) && customParent)\n      { arrayishRemove(customParent.refs, this.value, tagOrDom); }\n\n    if (isBlank(value)) {\n      // if the value is blank, we remove it\n      remAttr(this.dom, this.attr);\n    } else {\n      // add it to the refs of parent tag (this behavior was changed >=3.0)\n      if (customParent) { arrayishAdd(customParent.refs, value, tagOrDom); }\n      // set the actual DOM attr\n      setAttr(this.dom, this.attr, value);\n    }\n    this.value = value;\n    this.firstRun = false;\n  },\n  unmount: function unmount() {\n    var tagOrDom = this.tag || this.dom;\n    var customParent = this.parent && getImmediateCustomParentTag(this.parent);\n    if (!isBlank(this.value) && customParent)\n      { arrayishRemove(customParent.refs, this.value, tagOrDom); }\n    delete this.dom;\n    delete this.parent;\n  }\n};\n\n/**\n * Convert the item looped into an object used to extend the child tag properties\n * @param   { Object } expr - object containing the keys used to extend the children tags\n * @param   { * } key - value to assign to the new object returned\n * @param   { * } val - value containing the position of the item in the array\n * @param   { Object } base - prototype object for the new item\n * @returns { Object } - new object containing the values of the original item\n *\n * The variables 'key' and 'val' are arbitrary.\n * They depend on the collection type looped (Array, Object)\n * and on the expression used on the each tag\n *\n */\nfunction mkitem(expr, key, val, base) {\n  var item = base ? Object.create(base) : {};\n  item[expr.key] = key;\n  if (expr.pos) { item[expr.pos] = val; }\n  return item\n}\n\n/**\n * Unmount the redundant tags\n * @param   { Array } items - array containing the current items to loop\n * @param   { Array } tags - array containing all the children tags\n * @param   { String } tagName - key used to identify the type of tag\n * @param   { Object } parent - parent tag to remove the child from\n */\nfunction unmountRedundant(items, tags, tagName, parent) {\n\n  var i = tags.length,\n    j = items.length,\n    t;\n\n  while (i > j) {\n    t = tags[--i];\n    tags.splice(i, 1);\n    t.unmount();\n    arrayishRemove(parent.tags, tagName, t, true);\n  }\n}\n\n/**\n * Move the nested custom tags in non custom loop tags\n * @this Tag\n * @param   { Number } i - current position of the loop tag\n */\nfunction moveNestedTags(i) {\n  var this$1 = this;\n\n  each(Object.keys(this.tags), function (tagName) {\n    var tag = this$1.tags[tagName];\n    if (isArray(tag))\n      { each(tag, function (t) {\n        moveChildTag.apply(t, [tagName, i]);\n      }); }\n    else\n      { moveChildTag.apply(tag, [tagName, i]); }\n  });\n}\n\n/**\n * Move a child tag\n * @this Tag\n * @param   { HTMLElement } root - dom node containing all the loop children\n * @param   { Tag } nextTag - instance of the next tag preceding the one we want to move\n * @param   { Boolean } isVirtual - is it a virtual tag?\n */\nfunction move(root, nextTag, isVirtual) {\n  if (isVirtual)\n    { moveVirtual.apply(this, [root, nextTag]); }\n  else\n    { safeInsert(root, this.root, nextTag.root); }\n}\n\n/**\n * Insert and mount a child tag\n * @this Tag\n * @param   { HTMLElement } root - dom node containing all the loop children\n * @param   { Tag } nextTag - instance of the next tag preceding the one we want to insert\n * @param   { Boolean } isVirtual - is it a virtual tag?\n */\nfunction insert(root, nextTag, isVirtual) {\n  if (isVirtual)\n    { makeVirtual.apply(this, [root, nextTag]); }\n  else\n    { safeInsert(root, this.root, nextTag.root); }\n}\n\n/**\n * Append a new tag into the DOM\n * @this Tag\n * @param   { HTMLElement } root - dom node containing all the loop children\n * @param   { Boolean } isVirtual - is it a virtual tag?\n */\nfunction append(root, isVirtual) {\n  if (isVirtual)\n    { makeVirtual.call(this, root); }\n  else\n    { root.appendChild(this.root); }\n}\n\n/**\n * Manage tags having the 'each'\n * @param   { HTMLElement } dom - DOM node we need to loop\n * @param   { Tag } parent - parent tag instance where the dom node is contained\n * @param   { String } expr - string contained in the 'each' attribute\n * @returns { Object } expression object for this each loop\n */\nfunction _each(dom, parent, expr) {\n\n  // remove the each property from the original tag\n  remAttr(dom, 'each');\n\n  var mustReorder = typeof getAttr(dom, 'no-reorder') !== T_STRING || remAttr(dom, 'no-reorder'),\n    tagName = getTagName(dom),\n    impl = __TAG_IMPL[tagName] || { tmpl: getOuterHTML(dom) },\n    useRoot = RE_SPECIAL_TAGS.test(tagName),\n    parentNode = dom.parentNode,\n    ref = createDOMPlaceholder(),\n    child = getTag(dom),\n    ifExpr = getAttr(dom, 'if'),\n    tags = [],\n    oldItems = [],\n    hasKeys,\n    isLoop = true,\n    isAnonymous = !__TAG_IMPL[tagName],\n    isVirtual = dom.tagName === 'VIRTUAL';\n\n  // parse the each expression\n  expr = tmpl.loopKeys(expr);\n  expr.isLoop = true;\n\n  if (ifExpr) { remAttr(dom, 'if'); }\n\n  // insert a marked where the loop tags will be injected\n  parentNode.insertBefore(ref, dom);\n  parentNode.removeChild(dom);\n\n  expr.update = function updateEach() {\n\n    // get the new items collection\n    var items = tmpl(expr.val, parent),\n      frag = createFrag(),\n      root = ref.parentNode;\n\n    // object loop. any changes cause full redraw\n    if (!isArray(items)) {\n      hasKeys = items || false;\n      items = hasKeys ?\n        Object.keys(items).map(function (key) {\n          return mkitem(expr, items[key], key)\n        }) : [];\n    } else {\n      hasKeys = false;\n    }\n\n    if (ifExpr) {\n      items = items.filter(function(item, i) {\n        if (expr.key) {\n          return !!tmpl(ifExpr, mkitem(expr, item, i, parent))\n        }\n        // in case it's not a keyed loop\n        // we test the validity of the if expression against\n        // the item and the parent\n        return !!tmpl(ifExpr, parent) || !!tmpl(ifExpr, item)\n      });\n    }\n\n    // loop all the new items\n    each(items, function(item, i) {\n      // reorder only if the items are objects\n      var\n        _mustReorder = mustReorder && typeof item === T_OBJECT && !hasKeys,\n        oldPos = oldItems.indexOf(item),\n        pos = ~oldPos && _mustReorder ? oldPos : i,\n        // does a tag exist in this position?\n        tag = tags[pos];\n\n      item = !hasKeys && expr.key ? mkitem(expr, item, i) : item;\n\n      // new tag\n      if (\n        !_mustReorder && !tag // with no-reorder we just update the old tags\n        ||\n        _mustReorder && !~oldPos // by default we always try to reorder the DOM elements\n      ) {\n\n        var mustAppend = i === tags.length;\n\n        tag = new Tag$$1(impl, {\n          parent: parent,\n          isLoop: isLoop,\n          isAnonymous: isAnonymous,\n          root: useRoot ? root : dom.cloneNode(),\n          item: item\n        }, dom.innerHTML);\n\n        // mount the tag\n        tag.mount();\n\n        if (mustAppend)\n          { append.apply(tag, [frag || root, isVirtual]); }\n        else\n          { insert.apply(tag, [root, tags[i], isVirtual]); }\n\n        if (!mustAppend) { oldItems.splice(i, 0, item); }\n        tags.splice(i, 0, tag);\n        if (child) { arrayishAdd(parent.tags, tagName, tag, true); }\n        pos = i; // handled here so no move\n      } else { tag.update(item); }\n\n      // reorder the tag if it's not located in its previous position\n      if (pos !== i && _mustReorder) {\n        // #closes 2040\n        if (contains(items, oldItems[i])) {\n          move.apply(tag, [root, tags[i], isVirtual]);\n        }\n        // update the position attribute if it exists\n        if (expr.pos) { tag[expr.pos] = i; }\n        // move the old tag instance\n        tags.splice(i, 0, tags.splice(pos, 1)[0]);\n        // move the old item\n        oldItems.splice(i, 0, oldItems.splice(pos, 1)[0]);\n        // if the loop tags are not custom\n        // we need to move all their custom tags into the right position\n        if (!child && tag.tags) { moveNestedTags.call(tag, i); }\n      }\n\n      // cache the original item to use it in the events bound to this node\n      // and its children\n      tag._item = item;\n      // cache the real parent tag internally\n      defineProperty(tag, '_parent', parent);\n    });\n\n    // remove the redundant tags\n    unmountRedundant(items, tags, tagName, parent);\n\n    // clone the items array\n    oldItems = items.slice();\n\n    root.insertBefore(frag, ref);\n  };\n\n  expr.unmount = function() {\n    each(tags, function(t) { t.unmount(); });\n  };\n\n  return expr\n}\n\n/**\n * Walk the tag DOM to detect the expressions to evaluate\n * @this Tag\n * @param   { HTMLElement } root - root tag where we will start digging the expressions\n * @param   { Array } expressions - empty array where the expressions will be added\n * @param   { Boolean } mustIncludeRoot - flag to decide whether the root must be parsed as well\n * @returns { Object } an object containing the root noode and the dom tree\n */\nfunction parseExpressions(root, expressions, mustIncludeRoot) {\n  var this$1 = this;\n\n  var tree = {parent: {children: expressions}};\n\n  walkNodes(root, function (dom, ctx) {\n    var type = dom.nodeType, parent = ctx.parent, attr, expr, tagImpl;\n    if (!mustIncludeRoot && dom === root) { return {parent: parent} }\n\n    // text node\n    if (type === 3 && dom.parentNode.tagName !== 'STYLE' && tmpl.hasExpr(dom.nodeValue))\n      { parent.children.push({dom: dom, expr: dom.nodeValue}); }\n\n    if (type !== 1) { return ctx } // not an element\n\n    // loop. each does it's own thing (for now)\n    if (attr = getAttr(dom, 'each')) {\n      parent.children.push(_each(dom, this$1, attr));\n      return false\n    }\n\n    // if-attrs become the new parent. Any following expressions (either on the current\n    // element, or below it) become children of this expression.\n    if (attr = getAttr(dom, 'if')) {\n      parent.children.push(Object.create(IfExpr).init(dom, this$1, attr));\n      return false\n    }\n\n    if (expr = getAttr(dom, RIOT_TAG_IS)) {\n      if (tmpl.hasExpr(expr)) {\n        parent.children.push({isRtag: true, expr: expr, dom: dom});\n        return false\n      }\n    }\n\n    // if this is a tag, stop traversing here.\n    // we ignore the root, since parseExpressions is called while we're mounting that root\n    tagImpl = getTag(dom);\n    if (tagImpl && (dom !== root || mustIncludeRoot)) {\n      var conf = {root: dom, parent: this$1, hasImpl: true};\n      parent.children.push(initChildTag(tagImpl, conf, dom.innerHTML, this$1));\n      return false\n    }\n\n    // attribute expressions\n    parseAttributes.apply(this$1, [dom, dom.attributes, function(attr, expr) {\n      if (!expr) { return }\n      parent.children.push(expr);\n    }]);\n\n    // whatever the parent is, all child elements get the same parent.\n    // If this element had an if-attr, that's the parent for all child elements\n    return {parent: parent}\n  }, tree);\n\n  return { tree: tree, root: root }\n}\n\n/**\n * Calls `fn` for every attribute on an element. If that attr has an expression,\n * it is also passed to fn.\n * @this Tag\n * @param   { HTMLElement } dom - dom node to parse\n * @param   { Array } attrs - array of attributes\n * @param   { Function } fn - callback to exec on any iteration\n */\nfunction parseAttributes(dom, attrs, fn) {\n  var this$1 = this;\n\n  each(attrs, function (attr) {\n    var name = attr.name, bool = isBoolAttr(name), expr;\n\n    if (~['ref', 'data-ref'].indexOf(name)) {\n      expr =  Object.create(RefExpr).init(dom, name, attr.value, this$1);\n    } else if (tmpl.hasExpr(attr.value)) {\n      expr = {dom: dom, expr: attr.value, attr: attr.name, bool: bool};\n    }\n\n    fn(attr, expr);\n  });\n}\n\n/*\n  Includes hacks needed for the Internet Explorer version 9 and below\n  See: http://kangax.github.io/compat-table/es5/#ie8\n       http://codeplanet.io/dropping-ie8/\n*/\n\nvar reHasYield  = /<yield\\b/i;\nvar reYieldAll  = /<yield\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>|>)/ig;\nvar reYieldSrc  = /<yield\\s+to=['\"]([^'\">]*)['\"]\\s*>([\\S\\s]*?)<\\/yield\\s*>/ig;\nvar reYieldDest = /<yield\\s+from=['\"]?([-\\w]+)['\"]?\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>)/ig;\nvar rootEls = { tr: 'tbody', th: 'tr', td: 'tr', col: 'colgroup' };\nvar tblTags = IE_VERSION && IE_VERSION < 10 ? RE_SPECIAL_TAGS : RE_SPECIAL_TAGS_NO_OPTION;\nvar GENERIC = 'div';\n\n\n/*\n  Creates the root element for table or select child elements:\n  tr/th/td/thead/tfoot/tbody/caption/col/colgroup/option/optgroup\n*/\nfunction specialTags(el, tmpl, tagName) {\n\n  var\n    select = tagName[0] === 'o',\n    parent = select ? 'select>' : 'table>';\n\n  // trim() is important here, this ensures we don't have artifacts,\n  // so we can check if we have only one element inside the parent\n  el.innerHTML = '<' + parent + tmpl.trim() + '</' + parent;\n  parent = el.firstChild;\n\n  // returns the immediate parent if tr/th/td/col is the only element, if not\n  // returns the whole tree, as this can include additional elements\n  if (select) {\n    parent.selectedIndex = -1;  // for IE9, compatible w/current riot behavior\n  } else {\n    // avoids insertion of cointainer inside container (ex: tbody inside tbody)\n    var tname = rootEls[tagName];\n    if (tname && parent.childElementCount === 1) { parent = $(tname, parent); }\n  }\n  return parent\n}\n\n/*\n  Replace the yield tag from any tag template with the innerHTML of the\n  original tag in the page\n*/\nfunction replaceYield(tmpl, html) {\n  // do nothing if no yield\n  if (!reHasYield.test(tmpl)) { return tmpl }\n\n  // be careful with #1343 - string on the source having `$1`\n  var src = {};\n\n  html = html && html.replace(reYieldSrc, function (_, ref, text) {\n    src[ref] = src[ref] || text;   // preserve first definition\n    return ''\n  }).trim();\n\n  return tmpl\n    .replace(reYieldDest, function (_, ref, def) {  // yield with from - to attrs\n      return src[ref] || def || ''\n    })\n    .replace(reYieldAll, function (_, def) {        // yield without any \"from\"\n      return html || def || ''\n    })\n}\n\n/**\n * Creates a DOM element to wrap the given content. Normally an `DIV`, but can be\n * also a `TABLE`, `SELECT`, `TBODY`, `TR`, or `COLGROUP` element.\n *\n * @param   { String } tmpl  - The template coming from the custom tag definition\n * @param   { String } html - HTML content that comes from the DOM element where you\n *           will mount the tag, mostly the original tag in the page\n * @param   { Boolean } checkSvg - flag needed to know if we need to force the svg rendering in case of loop nodes\n * @returns { HTMLElement } DOM element with _tmpl_ merged through `YIELD` with the _html_.\n */\nfunction mkdom(tmpl, html, checkSvg) {\n  var match   = tmpl && tmpl.match(/^\\s*<([-\\w]+)/),\n    tagName = match && match[1].toLowerCase(),\n    el = mkEl(GENERIC, checkSvg && isSVGTag(tagName));\n\n  // replace all the yield tags with the tag inner html\n  tmpl = replaceYield(tmpl, html);\n\n  /* istanbul ignore next */\n  if (tblTags.test(tagName))\n    { el = specialTags(el, tmpl, tagName); }\n  else\n    { setInnerHTML(el, tmpl); }\n\n  el.stub = true;\n\n  return el\n}\n\n/**\n * Another way to create a riot tag a bit more es6 friendly\n * @param { HTMLElement } el - tag DOM selector or DOM node/s\n * @param { Object } opts - tag logic\n * @returns { Tag } new riot tag instance\n */\nfunction Tag$1(el, opts) {\n  // get the tag properties from the class constructor\n  var ref = this;\n  var name = ref.name;\n  var tmpl = ref.tmpl;\n  var css = ref.css;\n  var attrs = ref.attrs;\n  var onCreate = ref.onCreate;\n  // register a new tag and cache the class prototype\n  if (!__TAG_IMPL[name]) {\n    tag$$1(name, tmpl, css, attrs, onCreate);\n    // cache the class constructor\n    __TAG_IMPL[name].class = this.constructor;\n  }\n\n  // mount the tag using the class instance\n  mountTo(el, name, opts, this);\n  // inject the component css\n  if (css) { styleManager.inject(); }\n\n  return this\n}\n\n/**\n * Create a new riot tag implementation\n * @param   { String }   name - name/id of the new riot tag\n * @param   { String }   tmpl - tag template\n * @param   { String }   css - custom tag css\n * @param   { String }   attrs - root tag attributes\n * @param   { Function } fn - user function\n * @returns { String } name/id of the tag just created\n */\nfunction tag$$1(name, tmpl, css, attrs, fn) {\n  if (isFunction(attrs)) {\n    fn = attrs;\n\n    if (/^[\\w\\-]+\\s?=/.test(css)) {\n      attrs = css;\n      css = '';\n    } else\n      { attrs = ''; }\n  }\n\n  if (css) {\n    if (isFunction(css))\n      { fn = css; }\n    else\n      { styleManager.add(css); }\n  }\n\n  name = name.toLowerCase();\n  __TAG_IMPL[name] = { name: name, tmpl: tmpl, attrs: attrs, fn: fn };\n\n  return name\n}\n\n/**\n * Create a new riot tag implementation (for use by the compiler)\n * @param   { String }   name - name/id of the new riot tag\n * @param   { String }   tmpl - tag template\n * @param   { String }   css - custom tag css\n * @param   { String }   attrs - root tag attributes\n * @param   { Function } fn - user function\n * @returns { String } name/id of the tag just created\n */\nfunction tag2$$1(name, tmpl, css, attrs, fn) {\n  if (css)\n    { styleManager.add(css, name); }\n\n  var exists = !!__TAG_IMPL[name];\n  __TAG_IMPL[name] = { name: name, tmpl: tmpl, attrs: attrs, fn: fn };\n\n  if (exists && util.hotReloader)\n    { util.hotReloader(name); }\n\n  return name\n}\n\n/**\n * Mount a tag using a specific tag implementation\n * @param   { * } selector - tag DOM selector or DOM node/s\n * @param   { String } tagName - tag implementation name\n * @param   { Object } opts - tag logic\n * @returns { Array } new tags instances\n */\nfunction mount$$1(selector, tagName, opts) {\n  var tags = [];\n\n  function pushTagsTo(root) {\n    if (root.tagName) {\n      var riotTag = getAttr(root, RIOT_TAG_IS);\n\n      // have tagName? force riot-tag to be the same\n      if (tagName && riotTag !== tagName) {\n        riotTag = tagName;\n        setAttr(root, RIOT_TAG_IS, tagName);\n      }\n\n      var tag$$1 = mountTo(root, riotTag || root.tagName.toLowerCase(), opts);\n\n      if (tag$$1)\n        { tags.push(tag$$1); }\n    } else if (root.length)\n      { each(root, pushTagsTo); } // assume nodeList\n  }\n\n  // inject styles into DOM\n  styleManager.inject();\n\n  if (isObject(tagName)) {\n    opts = tagName;\n    tagName = 0;\n  }\n\n  var elem;\n  var allTags;\n\n  // crawl the DOM to find the tag\n  if (isString(selector)) {\n    selector = selector === '*' ?\n      // select all registered tags\n      // & tags found with the riot-tag attribute set\n      allTags = selectTags() :\n      // or just the ones named like the selector\n      selector + selectTags(selector.split(/, */));\n\n    // make sure to pass always a selector\n    // to the querySelectorAll function\n    elem = selector ? $$(selector) : [];\n  }\n  else\n    // probably you have passed already a tag or a NodeList\n    { elem = selector; }\n\n  // select all the registered and mount them inside their root elements\n  if (tagName === '*') {\n    // get all custom tags\n    tagName = allTags || selectTags();\n    // if the root els it's just a single tag\n    if (elem.tagName)\n      { elem = $$(tagName, elem); }\n    else {\n      // select all the children for all the different root elements\n      var nodeList = [];\n\n      each(elem, function (_el) { return nodeList.push($$(tagName, _el)); });\n\n      elem = nodeList;\n    }\n    // get rid of the tagName\n    tagName = 0;\n  }\n\n  pushTagsTo(elem);\n\n  return tags\n}\n\n// Create a mixin that could be globally shared across all the tags\nvar mixins = {};\nvar globals = mixins[GLOBAL_MIXIN] = {};\nvar _id = 0;\n\n/**\n * Create/Return a mixin by its name\n * @param   { String }  name - mixin name (global mixin if object)\n * @param   { Object }  mix - mixin logic\n * @param   { Boolean } g - is global?\n * @returns { Object }  the mixin logic\n */\nfunction mixin$$1(name, mix, g) {\n  // Unnamed global\n  if (isObject(name)) {\n    mixin$$1((\"__unnamed_\" + (_id++)), name, true);\n    return\n  }\n\n  var store = g ? globals : mixins;\n\n  // Getter\n  if (!mix) {\n    if (isUndefined(store[name]))\n      { throw new Error('Unregistered mixin: ' + name) }\n\n    return store[name]\n  }\n\n  // Setter\n  store[name] = isFunction(mix) ?\n    extend(mix.prototype, store[name] || {}) && mix :\n    extend(store[name] || {}, mix);\n}\n\n/**\n * Update all the tags instances created\n * @returns { Array } all the tags instances\n */\nfunction update$1() {\n  return each(__TAGS_CACHE, function (tag$$1) { return tag$$1.update(); })\n}\n\nfunction unregister$$1(name) {\n  delete __TAG_IMPL[name];\n}\n\n// counter to give a unique id to all the Tag instances\nvar __uid = 0;\n\n/**\n * We need to update opts for this tag. That requires updating the expressions\n * in any attributes on the tag, and then copying the result onto opts.\n * @this Tag\n * @param   {Boolean} isLoop - is it a loop tag?\n * @param   { Tag }  parent - parent tag node\n * @param   { Boolean }  isAnonymous - is it a tag without any impl? (a tag not registered)\n * @param   { Object }  opts - tag options\n * @param   { Array }  instAttrs - tag attributes array\n */\nfunction updateOpts(isLoop, parent, isAnonymous, opts, instAttrs) {\n  // isAnonymous `each` tags treat `dom` and `root` differently. In this case\n  // (and only this case) we don't need to do updateOpts, because the regular parse\n  // will update those attrs. Plus, isAnonymous tags don't need opts anyway\n  if (isLoop && isAnonymous) { return }\n\n  var ctx = !isAnonymous && isLoop ? this : parent || this;\n  each(instAttrs, function (attr) {\n    if (attr.expr) { updateAllExpressions.call(ctx, [attr.expr]); }\n    opts[toCamel(attr.name)] = attr.expr ? attr.expr.value : attr.value;\n  });\n}\n\n\n/**\n * Tag class\n * @constructor\n * @param { Object } impl - it contains the tag template, and logic\n * @param { Object } conf - tag options\n * @param { String } innerHTML - html that eventually we need to inject in the tag\n */\nfunction Tag$$1(impl, conf, innerHTML) {\n\n  var opts = extend({}, conf.opts),\n    parent = conf.parent,\n    isLoop = conf.isLoop,\n    isAnonymous = conf.isAnonymous,\n    item = cleanUpData(conf.item),\n    instAttrs = [], // All attributes on the Tag when it's first parsed\n    implAttrs = [], // expressions on this type of Tag\n    expressions = [],\n    root = conf.root,\n    tagName = conf.tagName || getTagName(root),\n    isVirtual = tagName === 'virtual',\n    propsInSyncWithParent = [],\n    dom;\n\n  // make this tag observable\n  observable(this);\n  // only call unmount if we have a valid __TAG_IMPL (has name property)\n  if (impl.name && root._tag) { root._tag.unmount(true); }\n\n  // not yet mounted\n  this.isMounted = false;\n  root.isLoop = isLoop;\n\n  defineProperty(this, '_internal', {\n    isAnonymous: isAnonymous,\n    instAttrs: instAttrs,\n    innerHTML: innerHTML,\n    // these vars will be needed only for the virtual tags\n    virts: [],\n    tail: null,\n    head: null\n  });\n\n  // create a unique id to this tag\n  // it could be handy to use it also to improve the virtual dom rendering speed\n  defineProperty(this, '_riot_id', ++__uid); // base 1 allows test !t._riot_id\n\n  extend(this, { root: root, opts: opts }, item);\n  defineProperty(this, 'parent', parent || false);\n  // protect the \"tags\" and \"refs\" property from being overridden\n  defineProperty(this, 'tags', {});\n  defineProperty(this, 'refs', {});\n\n  dom = mkdom(impl.tmpl, innerHTML, isLoop);\n\n  /**\n   * Update the tag expressions and options\n   * @param   { * }  data - data we want to use to extend the tag properties\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'update', function tagUpdate(data) {\n    if (isFunction(this.shouldUpdate) && !this.shouldUpdate(data)) { return this }\n\n    // make sure the data passed will not override\n    // the component core methods\n    data = cleanUpData(data);\n\n    // inherit properties from the parent, but only for isAnonymous tags\n    if (isLoop && isAnonymous) { inheritFrom.apply(this, [this.parent, propsInSyncWithParent]); }\n    extend(this, data);\n    updateOpts.apply(this, [isLoop, parent, isAnonymous, opts, instAttrs]);\n    if (this.isMounted) { this.trigger('update', data); }\n    updateAllExpressions.call(this, expressions);\n    if (this.isMounted) { this.trigger('updated'); }\n\n    return this\n\n  }.bind(this));\n\n  /**\n   * Add a mixin to this tag\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'mixin', function tagMixin() {\n    var this$1 = this;\n\n    each(arguments, function (mix) {\n      var instance,\n        props = [],\n        obj;\n\n      mix = isString(mix) ? mixin$$1(mix) : mix;\n\n      // check if the mixin is a function\n      if (isFunction(mix)) {\n        // create the new mixin instance\n        instance = new mix();\n      } else { instance = mix; }\n\n      var proto = Object.getPrototypeOf(instance);\n\n      // build multilevel prototype inheritance chain property list\n      do { props = props.concat(Object.getOwnPropertyNames(obj || instance)); }\n      while (obj = Object.getPrototypeOf(obj || instance))\n\n      // loop the keys in the function prototype or the all object keys\n      each(props, function (key) {\n        // bind methods to this\n        // allow mixins to override other properties/parent mixins\n        if (key !== 'init') {\n          // check for getters/setters\n          var descriptor = Object.getOwnPropertyDescriptor(instance, key) || Object.getOwnPropertyDescriptor(proto, key);\n          var hasGetterSetter = descriptor && (descriptor.get || descriptor.set);\n\n          // apply method only if it does not already exist on the instance\n          if (!this$1.hasOwnProperty(key) && hasGetterSetter) {\n            Object.defineProperty(this$1, key, descriptor);\n          } else {\n            this$1[key] = isFunction(instance[key]) ?\n              instance[key].bind(this$1) :\n              instance[key];\n          }\n        }\n      });\n\n      // init method will be called automatically\n      if (instance.init)\n        { instance.init.bind(this$1)(); }\n    });\n    return this\n  }.bind(this));\n\n  /**\n   * Mount the current tag instance\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'mount', function tagMount() {\n    var this$1 = this;\n\n    root._tag = this; // keep a reference to the tag just created\n\n    // Read all the attrs on this instance. This give us the info we need for updateOpts\n    parseAttributes.apply(parent, [root, root.attributes, function (attr, expr) {\n      if (!isAnonymous && RefExpr.isPrototypeOf(expr)) { expr.tag = this$1; }\n      attr.expr = expr;\n      instAttrs.push(attr);\n    }]);\n\n    // update the root adding custom attributes coming from the compiler\n    implAttrs = [];\n    walkAttrs(impl.attrs, function (k, v) { implAttrs.push({name: k, value: v}); });\n    parseAttributes.apply(this, [root, implAttrs, function (attr, expr) {\n      if (expr) { expressions.push(expr); }\n      else { setAttr(root, attr.name, attr.value); }\n    }]);\n\n    // children in loop should inherit from true parent\n    if (this._parent && isAnonymous) { inheritFrom.apply(this, [this._parent, propsInSyncWithParent]); }\n\n    // initialiation\n    updateOpts.apply(this, [isLoop, parent, isAnonymous, opts, instAttrs]);\n\n    // add global mixins\n    var globalMixin = mixin$$1(GLOBAL_MIXIN);\n\n    if (globalMixin) {\n      for (var i in globalMixin) {\n        if (globalMixin.hasOwnProperty(i)) {\n          this$1.mixin(globalMixin[i]);\n        }\n      }\n    }\n\n    if (impl.fn) { impl.fn.call(this, opts); }\n\n    this.trigger('before-mount');\n\n    // parse layout after init. fn may calculate args for nested custom tags\n    parseExpressions.apply(this, [dom, expressions, false]);\n\n    this.update(item);\n\n    if (isLoop && isAnonymous) {\n      // update the root attribute for the looped elements\n      this.root = root = dom.firstChild;\n    } else {\n      while (dom.firstChild) { root.appendChild(dom.firstChild); }\n      if (root.stub) { root = parent.root; }\n    }\n\n    defineProperty(this, 'root', root);\n    this.isMounted = true;\n\n    // if it's not a child tag we can trigger its mount event\n    if (!this.parent || this.parent.isMounted) {\n      this.trigger('mount');\n    }\n    // otherwise we need to wait that the parent event gets triggered\n    else { this.parent.one('mount', function () {\n      this$1.trigger('mount');\n    }); }\n\n    return this\n\n  }.bind(this));\n\n  /**\n   * Unmount the tag instance\n   * @param { Boolean } mustKeepRoot - if it's true the root node will not be removed\n   * @returns { Tag } the current tag instance\n   */\n  defineProperty(this, 'unmount', function tagUnmount(mustKeepRoot) {\n    var this$1 = this;\n\n    var el = this.root,\n      p = el.parentNode,\n      ptag,\n      tagIndex = __TAGS_CACHE.indexOf(this);\n\n    this.trigger('before-unmount');\n\n    // clear all attributes coming from the mounted tag\n    walkAttrs(impl.attrs, function (name) {\n      if (startsWith(name, RIOT_PREFIX))\n        { name = name.slice(RIOT_PREFIX.length); }\n      remAttr(root, name);\n    });\n\n    // remove this tag instance from the global virtualDom variable\n    if (~tagIndex)\n      { __TAGS_CACHE.splice(tagIndex, 1); }\n\n    if (p) {\n      if (parent) {\n        ptag = getImmediateCustomParentTag(parent);\n\n        if (isVirtual) {\n          Object.keys(this.tags).forEach(function (tagName) {\n            arrayishRemove(ptag.tags, tagName, this$1.tags[tagName]);\n          });\n        } else {\n          arrayishRemove(ptag.tags, tagName, this);\n        }\n      } else {\n        while (el.firstChild) { el.removeChild(el.firstChild); }\n      }\n\n      if (!mustKeepRoot) {\n        p.removeChild(el);\n      } else {\n        // the riot-tag and the data-is attributes aren't needed anymore, remove them\n        remAttr(p, RIOT_TAG_IS);\n      }\n    }\n\n    if (this._internal.virts) {\n      each(this._internal.virts, function (v) {\n        if (v.parentNode) { v.parentNode.removeChild(v); }\n      });\n    }\n\n    // allow expressions to unmount themselves\n    unmountAll(expressions);\n    each(instAttrs, function (a) { return a.expr && a.expr.unmount && a.expr.unmount(); });\n\n    this.trigger('unmount');\n    this.off('*');\n    this.isMounted = false;\n\n    delete this.root._tag;\n\n    return this\n\n  }.bind(this));\n}\n\n/**\n * Detect the tag implementation by a DOM node\n * @param   { Object } dom - DOM node we need to parse to get its tag implementation\n * @returns { Object } it returns an object containing the implementation of a custom tag (template and boot function)\n */\nfunction getTag(dom) {\n  return dom.tagName && __TAG_IMPL[getAttr(dom, RIOT_TAG_IS) ||\n    getAttr(dom, RIOT_TAG_IS) || dom.tagName.toLowerCase()]\n}\n\n/**\n * Inherit properties from a target tag instance\n * @this Tag\n * @param   { Tag } target - tag where we will inherit properties\n * @param   { Array } propsInSyncWithParent - array of properties to sync with the target\n */\nfunction inheritFrom(target, propsInSyncWithParent) {\n  var this$1 = this;\n\n  each(Object.keys(target), function (k) {\n    // some properties must be always in sync with the parent tag\n    var mustSync = !isReservedName(k) && contains(propsInSyncWithParent, k);\n\n    if (isUndefined(this$1[k]) || mustSync) {\n      // track the property to keep in sync\n      // so we can keep it updated\n      if (!mustSync) { propsInSyncWithParent.push(k); }\n      this$1[k] = target[k];\n    }\n  });\n}\n\n/**\n * Move the position of a custom tag in its parent tag\n * @this Tag\n * @param   { String } tagName - key where the tag was stored\n * @param   { Number } newPos - index where the new tag will be stored\n */\nfunction moveChildTag(tagName, newPos) {\n  var parent = this.parent,\n    tags;\n  // no parent no move\n  if (!parent) { return }\n\n  tags = parent.tags[tagName];\n\n  if (isArray(tags))\n    { tags.splice(newPos, 0, tags.splice(tags.indexOf(this), 1)[0]); }\n  else { arrayishAdd(parent.tags, tagName, this); }\n}\n\n/**\n * Create a new child tag including it correctly into its parent\n * @param   { Object } child - child tag implementation\n * @param   { Object } opts - tag options containing the DOM node where the tag will be mounted\n * @param   { String } innerHTML - inner html of the child node\n * @param   { Object } parent - instance of the parent tag including the child custom tag\n * @returns { Object } instance of the new child tag just created\n */\nfunction initChildTag(child, opts, innerHTML, parent) {\n  var tag = new Tag$$1(child, opts, innerHTML),\n    tagName = opts.tagName || getTagName(opts.root, true),\n    ptag = getImmediateCustomParentTag(parent);\n  // fix for the parent attribute in the looped elements\n  defineProperty(tag, 'parent', ptag);\n  // store the real parent tag\n  // in some cases this could be different from the custom parent tag\n  // for example in nested loops\n  tag._parent = parent;\n\n  // add this tag to the custom parent tag\n  arrayishAdd(ptag.tags, tagName, tag);\n\n  // and also to the real parent tag\n  if (ptag !== parent)\n    { arrayishAdd(parent.tags, tagName, tag); }\n\n  // empty the child node once we got its template\n  // to avoid that its children get compiled multiple times\n  opts.root.innerHTML = '';\n\n  return tag\n}\n\n/**\n * Loop backward all the parents tree to detect the first custom parent tag\n * @param   { Object } tag - a Tag instance\n * @returns { Object } the instance of the first custom parent tag found\n */\nfunction getImmediateCustomParentTag(tag) {\n  var ptag = tag;\n  while (ptag._internal.isAnonymous) {\n    if (!ptag.parent) { break }\n    ptag = ptag.parent;\n  }\n  return ptag\n}\n\n/**\n * Trigger the unmount method on all the expressions\n * @param   { Array } expressions - DOM expressions\n */\nfunction unmountAll(expressions) {\n  each(expressions, function(expr) {\n    if (expr instanceof Tag$$1) { expr.unmount(true); }\n    else if (expr.unmount) { expr.unmount(); }\n  });\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   { Object } dom - DOM node we want to parse\n * @param   { Boolean } skipDataIs - hack to ignore the data-is attribute when attaching to parent\n * @returns { String } name to identify this dom node in riot\n */\nfunction getTagName(dom, skipDataIs) {\n  var child = getTag(dom),\n    namedTag = !skipDataIs && getAttr(dom, RIOT_TAG_IS);\n  return namedTag && !tmpl.hasExpr(namedTag) ?\n                namedTag :\n              child ? child.name : dom.tagName.toLowerCase()\n}\n\n/**\n * With this function we avoid that the internal Tag methods get overridden\n * @param   { Object } data - options we want to use to extend the tag instance\n * @returns { Object } clean object without containing the riot internal reserved words\n */\nfunction cleanUpData(data) {\n  if (!(data instanceof Tag$$1) && !(data && typeof data.trigger === T_FUNCTION))\n    { return data }\n\n  var o = {};\n  for (var key in data) {\n    if (!RE_RESERVED_NAMES.test(key)) { o[key] = data[key]; }\n  }\n  return o\n}\n\n/**\n * Set the property of an object for a given key. If something already\n * exists there, then it becomes an array containing both the old and new value.\n * @param { Object } obj - object on which to set the property\n * @param { String } key - property name\n * @param { Object } value - the value of the property to be set\n * @param { Boolean } ensureArray - ensure that the property remains an array\n */\nfunction arrayishAdd(obj, key, value, ensureArray) {\n  var dest = obj[key];\n  var isArr = isArray(dest);\n\n  if (dest && dest === value) { return }\n\n  // if the key was never set, set it once\n  if (!dest && ensureArray) { obj[key] = [value]; }\n  else if (!dest) { obj[key] = value; }\n  // if it was an array and not yet set\n  else if (!isArr || isArr && !contains(dest, value)) {\n    if (isArr) { dest.push(value); }\n    else { obj[key] = [dest, value]; }\n  }\n}\n\n/**\n * Removes an item from an object at a given key. If the key points to an array,\n * then the item is just removed from the array.\n * @param { Object } obj - object on which to remove the property\n * @param { String } key - property name\n * @param { Object } value - the value of the property to be removed\n * @param { Boolean } ensureArray - ensure that the property remains an array\n*/\nfunction arrayishRemove(obj, key, value, ensureArray) {\n  if (isArray(obj[key])) {\n    each(obj[key], function(item, i) {\n      if (item === value) { obj[key].splice(i, 1); }\n    });\n    if (!obj[key].length) { delete obj[key]; }\n    else if (obj[key].length === 1 && !ensureArray) { obj[key] = obj[key][0]; }\n  } else\n    { delete obj[key]; } // otherwise just delete the key\n}\n\n/**\n * Check whether a DOM node is in stub mode, useful for the riot 'if' directive\n * @param   { Object }  dom - DOM node we want to parse\n * @returns { Boolean } -\n */\nfunction isInStub(dom) {\n  while (dom) {\n    if (dom.inStub)\n      { return true }\n    dom = dom.parentNode;\n  }\n  return false\n}\n\n/**\n * Mount a tag creating new Tag instance\n * @param   { Object } root - dom node where the tag will be mounted\n * @param   { String } tagName - name of the riot tag we want to mount\n * @param   { Object } opts - options to pass to the Tag instance\n * @param   { Object } ctx - optional context that will be used to extend an existing class ( used in riot.Tag )\n * @returns { Tag } a new Tag instance\n */\nfunction mountTo(root, tagName, opts, ctx) {\n  var impl = __TAG_IMPL[tagName],\n    implClass = __TAG_IMPL[tagName].class,\n    tag = ctx || (implClass ? Object.create(implClass.prototype) : {}),\n    // cache the inner HTML to fix #855\n    innerHTML = root._innerHTML = root._innerHTML || root.innerHTML;\n\n  // clear the inner html\n  root.innerHTML = '';\n\n  var conf = { root: root, opts: opts };\n  if (opts && opts.parent) { conf.parent = opts.parent; }\n\n  if (impl && root) { Tag$$1.apply(tag, [impl, conf, innerHTML]); }\n\n  if (tag && tag.mount) {\n    tag.mount(true);\n    // add this tag to the virtualDom variable\n    if (!contains(__TAGS_CACHE, tag)) { __TAGS_CACHE.push(tag); }\n  }\n\n  return tag\n}\n\n\n/**\n * Adds the elements for a virtual tag\n * @this Tag\n * @param { Node } src - the node that will do the inserting or appending\n * @param { Tag } target - only if inserting, insert before this tag's first child\n */\nfunction makeVirtual(src, target) {\n  var this$1 = this;\n\n  var head = createDOMPlaceholder(),\n    tail = createDOMPlaceholder(),\n    frag = createFrag(),\n    sib, el;\n\n  this._internal.head = this.root.insertBefore(head, this.root.firstChild);\n  this._internal.tail = this.root.appendChild(tail);\n\n  el = this._internal.head;\n\n  while (el) {\n    sib = el.nextSibling;\n    frag.appendChild(el);\n    this$1._internal.virts.push(el); // hold for unmounting\n    el = sib;\n  }\n\n  if (target)\n    { src.insertBefore(frag, target._internal.head); }\n  else\n    { src.appendChild(frag); }\n}\n\n/**\n * Move virtual tag and all child nodes\n * @this Tag\n * @param { Node } src  - the node that will do the inserting\n * @param { Tag } target - insert before this tag's first child\n */\nfunction moveVirtual(src, target) {\n  var this$1 = this;\n\n  var el = this._internal.head,\n    frag = createFrag(),\n    sib;\n\n  while (el) {\n    sib = el.nextSibling;\n    frag.appendChild(el);\n    el = sib;\n    if (el === this$1._internal.tail) {\n      frag.appendChild(el);\n      src.insertBefore(frag, target._internal.head);\n      break\n    }\n  }\n}\n\n/**\n * Get selectors for tags\n * @param   { Array } tags - tag names to select\n * @returns { String } selector\n */\nfunction selectTags(tags) {\n  // select all tags\n  if (!tags) {\n    var keys = Object.keys(__TAG_IMPL);\n    return keys + selectTags(keys)\n  }\n\n  return tags\n    .filter(function (t) { return !/[^-\\w]/.test(t); })\n    .reduce(function (list, t) {\n      var name = t.trim().toLowerCase();\n      return list + \",[\" + RIOT_TAG_IS + \"=\\\"\" + name + \"\\\"]\"\n    }, '')\n}\n\n\nvar tags = Object.freeze({\n\tgetTag: getTag,\n\tinheritFrom: inheritFrom,\n\tmoveChildTag: moveChildTag,\n\tinitChildTag: initChildTag,\n\tgetImmediateCustomParentTag: getImmediateCustomParentTag,\n\tunmountAll: unmountAll,\n\tgetTagName: getTagName,\n\tcleanUpData: cleanUpData,\n\tarrayishAdd: arrayishAdd,\n\tarrayishRemove: arrayishRemove,\n\tisInStub: isInStub,\n\tmountTo: mountTo,\n\tmakeVirtual: makeVirtual,\n\tmoveVirtual: moveVirtual,\n\tselectTags: selectTags\n});\n\n/**\n * Riot public api\n */\n\nvar settings = Object.create(brackets.settings);\nvar util = {\n  tmpl: tmpl,\n  brackets: brackets,\n  styleManager: styleManager,\n  vdom: __TAGS_CACHE,\n  styleNode: styleManager.styleNode,\n  // export the riot internal utils as well\n  dom: dom,\n  check: check,\n  misc: misc,\n  tags: tags\n};\n\nexports.settings = settings;\nexports.util = util;\nexports.observable = observable;\nexports.Tag = Tag$1;\nexports.tag = tag$$1;\nexports.tag2 = tag2$$1;\nexports.mount = mount$$1;\nexports.mixin = mixin$$1;\nexports.update = update$1;\nexports.unregister = unregister$$1;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n// WEBPACK FOOTER //\n// /Users/aljabear/Projects/visualist/~/riot/riot.js","require('./controls.tag')\nrequire('./secondary_visuals.tag')\nrequire('./related_items.tag')\nrequire('./source.tag')\nrequire('./cross_refs.tag')\n\nriot.tag2('main', '<h1>Title</h1> <p>Other titles</p> <p>Distance to this event from your current location: 123 miles</p> <img src=\"https://placebear.com/g/300/300.jpg\"> <h3>Description</h3> <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p> <p>Other Descriptions</p> <secondary_visuals></secondary_visuals> <p>Record created by admin on January 1, 2017</p> <source></source> <cross_refs></cross_refs> <related_items title=\"Related Items\"></related_items> <related_items title=\"Similar Items\"></related_items> <controls></controls>', 'main { background-color: #eee; }', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/main.tag","riot.tag2('controls', '<h3>Controls</h3> <ul> <li>New</li> <li>Edit</li> <li>Delete</li> <li>Map it</li> <li>Featured</li> <li>Bookmark</li> <li>Add to Bucket List</li> <li> <h4>Cite</h4> <ul> <li>APA</li> <li>Chicago</li> <li>MLA</li> </ul> </li> <li> <h4>Permissions</h4> <ul> <li>Public</li> <li>Private</li> </ul> </li> <li> <h4>Share</h4> <ul> <li>Email</li> <li>Facebook</li> <li>Pinterest</li> </ul> </li> <li> <h4>Add to List</h4> <ul> <li>Checklist</li> <li>Bookmarks</li> </ul> </li> </ul>', '', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/controls.tag","require('./mini_tile.tag')\n\nriot.tag2('secondary_visuals', '<ul> <h3>Secondary Visuals</h3> <mini_tile></mini_tile> <mini_tile></mini_tile> <mini_tile></mini_tile> </ul>', '', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/secondary_visuals.tag","riot.tag2('mini_tile', '<img src=\"https://placebear.com/g/100/100.jpg\"> <p>This is a bear.</p>', '', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/mini_tile.tag","riot.tag2('related_items', '<ul> <h3>{opts.title}</h3> <ul> <li>Related Item</li> <li>Related Item</li> <li>Related Item</li> </ul> </ul>', '', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/related_items.tag","riot.tag2('source', '<dl> <dd>Source</dd> <dt>The Art Institute of Chicago</dt> <dd>Format</dd> <dt>Website</dt> <dd>Accessed</dd> <dt>January 1, 2017</dt> <dd>Rights</dd> <dt>Public Domain</dt> </dl>', '', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/source.tag","riot.tag2('cross_refs', '<ul> <h3>Cross References</h3> <li>Getty</li> <li>Art Institute of Chicago</li> <li>Library of Congress</li> <li>Artnet</li> <li>Chicago Gallery News</li> </ul>', '', '', function(opts) {\n});\n\n\n// WEBPACK FOOTER //\n// ./components/event/cross_refs.tag"],"sourceRoot":""}